{% extends 'base.html' %}

{% block content %}
<div class="payment-delete-container">
    <div class="payment-delete-card">
        <div class="payment-delete-header">
            <h3>Delete Payment</h3>
        </div>
        <div class="payment-delete-body">
            <div class="warning-alert">
                <h5><i class="fas fa-exclamation-triangle me-2"></i>Warning!</h5>
                <p>Are you sure you want to delete this payment record?</p>
                <p><strong>This action cannot be undone.</strong></p>
            </div>
            
            <div class="payment-details">
                <h5>Payment Details:</h5>
                <table>
                    <tr>
                        <th>Invoice Number:</th>
                        <td>{{ invoice.invoice_no }}</td>
                    </tr>
                    <tr>
                        <th>Supplier:</th>
                        <td>{{ invoice.supplierid.supplier_name }}</td>
                    </tr>
                    <tr>
                        <th>Invoice Total:</th>
                        <td>₹{{ invoice.invoice_total }}</td>
                    </tr>
                    <tr>
                        <th>Current Paid Amount:</th>
                        <td>₹{{ invoice.invoice_paid }}</td>
                    </tr>
                    <tr>
                        <th>Balance After Deletion:</th>
                        <td class="text-danger">₹{{ invoice.invoice_paid|add:"-"|add:payment.payment_amount }}</td>
                    </tr>
                    <tr>
                        <th>Payment Date:</th>
                        <td>{{ payment.payment_date|date:"F j, Y" }}</td>
                    </tr>
                    <tr>
                        <th>Payment Amount:</th>
                        <td class="text-danger">₹{{ payment.payment_amount }}</td>
                    </tr>
                    <tr>
                        <th>Payment Mode:</th>
                        <td>{{ payment.payment_mode }}</td>
                    </tr>
                    <tr>
                        <th>Reference:</th>
                        <td>{{ payment.payment_ref_no|default:"--" }}</td>
                    </tr>
                </table>
            </div>
            
            <form method="post">
                {% csrf_token %}
                <div class="delete-actions">
                    <a href="{% url 'invoice_detail' pk=invoice.invoiceid %}" class="btn-cancel">
                        <i class="fas fa-arrow-left me-2"></i>Cancel
                    </a>
                    <button type="submit" class="btn-delete">
                        <i class="fas fa-trash me-2"></i>Delete Payment
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}







