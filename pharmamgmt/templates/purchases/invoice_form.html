{% extends 'base.html' %}
{% load custom_filters %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/invoice_form.css' %}">
{% endblock %}

{% block content %}
<div class="purchase-invoice-form-container">
    <div class="purchase-invoice-form-wrapper">
        <div class="purchase-invoice-form-card">
            <div class="purchase-invoice-form-header">
                <div class="purchase-invoice-form-title-wrapper">
                    <h5 class="purchase-invoice-form-title">Add Purchase Invoice</h5>
                </div>
            </div>
            <div class="purchase-invoice-form-body">
                    <form method="post" class="purchase-invoice-form">
                        {% csrf_token %}
                        
                        <div class="purchase-invoice-form-row">
                            <div class="purchase-invoice-form-group">
                                <label for="{{ form.invoice_no.id_for_label }}" class="purchase-invoice-form-label">Invoice Number*</label>
                                {{ form.invoice_no }}
                                {% if form.invoice_no.errors %}
                                    <div class="purchase-invoice-error-message">{{ form.invoice_no.errors }}</div>
                                {% endif %}
                            </div>
                            <div class="purchase-invoice-form-group">
                                <label for="{{ form.invoice_date.id_for_label }}" class="purchase-invoice-form-label">Invoice Date*</label>
                                {{ form.invoice_date }}
                                {% if form.invoice_date.errors %}
                                    <div class="purchase-invoice-error-message">{{ form.invoice_date.errors }}</div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="purchase-invoice-form-group">
                            <label for="{{ form.supplierid.id_for_label }}" class="purchase-invoice-form-label">Supplier*</label>
                            {{ form.supplierid }}
                            {% if form.supplierid.errors %}
                                <div class="purchase-invoice-error-message">{{ form.supplierid.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="purchase-invoice-form-group">
                            <label for="{{ form.scroll_no.id_for_label }}" class="purchase-invoice-form-label">Scroll No</label>
                            {{ form.scroll_no }}
                            {% if form.scroll_no.errors %}
                                <div class="purchase-invoice-error-message">{{ form.scroll_no.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="purchase-invoice-form-row">
                            <div class="purchase-invoice-form-group">
                                <label for="{{ form.transport_charges.id_for_label }}" class="purchase-invoice-form-label">Transport Charges*</label>
                                {{ form.transport_charges }}
                                {% if form.transport_charges.errors %}
                                    <div class="purchase-invoice-error-message">{{ form.transport_charges.errors }}</div>
                                {% endif %}
                            </div>
                            <div class="purchase-invoice-form-group">
                                <label for="{{ form.invoice_total.id_for_label }}" class="purchase-invoice-form-label">Invoice Total*</label>
                                {{ form.invoice_total }}
                                {% if form.invoice_total.errors %}
                                    <div class="purchase-invoice-error-message">{{ form.invoice_total.errors }}</div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="purchase-invoice-info-alert">
                            <i class="fas fa-info-circle purchase-invoice-info-icon"></i>
                            After saving the invoice, you'll be able to add products to it.
                        </div>
                        
                        <div class="purchase-invoice-form-actions">
                            <button type="submit" class="purchase-invoice-btn-primary">
                                <i class="fas fa-save purchase-invoice-btn-icon"></i>Save Invoice
                            </button>
                            <a href="{% url 'invoice_list' %}" class="purchase-invoice-btn-secondary">
                                <i class="fas fa-arrow-left purchase-invoice-btn-icon"></i>Back to Invoices
                            </a>
                        </div>
                    </form>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Focus on invoice number input when page loads
    const invoiceNoInput = document.querySelector('input[name*="invoice_no"]');
    if (invoiceNoInput) {
        setTimeout(() => {
            invoiceNoInput.focus();
            invoiceNoInput.select();
        }, 100);
    }
});
</script>
{% endblock %}








