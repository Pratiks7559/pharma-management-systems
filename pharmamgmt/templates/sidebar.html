{% load static %}
<link rel="stylesheet" href="{% static 'css/sidebar.css' %}?v=1.1">
<script src="{% static 'js/sidebar.js' %}?v=1.1"></script>

<style>
.sidebar-container {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%) !important;
    box-shadow: 4px 0 15px rgba(0, 0, 0, 0.1) !important;
}

.sidebar-content {
    background: rgba(255, 255, 255, 0.1) !important;
    backdrop-filter: blur(10px) !important;
}

.nav-link, .nav-menu-button {
    color: rgba(255, 255, 255, 0.9) !important;
}

.nav-link:hover, .nav-menu-button:hover {
    background: rgba(255, 255, 255, 0.2) !important;
    color: white !important;
}

.user-name, .user-type {
    color: white !important;
}
</style>

<!-- Modern Sidebar -->
<aside class="sidebar-container" id="sidebar">
    <div class="sidebar-content">

        <!-- User Profile Section -->
        <div class="user-profile-section">
            {% if user.is_authenticated %}
            <div class="user-profile-content">
                <div class="user-avatar">
                    {% if user.path %}
                        <img src="{{ user.path.url }}" alt="{{ user.get_full_name|default:user.username }}" class="profile-picture">
                    {% else %}
                        <div class="default-logo">
                            <i class="fas fa-capsules"></i>
                        </div>
                    {% endif %}
                </div>
                <div class="user-info">
                    <div class="user-name">{{ user.get_full_name|default:user.username }}</div>
                    <div class="user-type">{{ user.user_type|title }}</div>
                </div>
            </div>
            {% endif %}
        </div>
        
        <!-- Navigation Menu -->
        <nav class="nav-menu">
            <ul>
                <!-- Dashboard -->
                <!-- <li>
                    <a href="{% url 'dashboard' %}" class="nav-link">
                        <i class="fas fa-tachometer-alt"></i>
                        <span class="nav-text">Dashboard</span>
                    </a>
                </li> -->
                
                <!-- Purchases Menu -->
                <li class="nav-item">
                    <button type="button" class="nav-menu-button" onclick="toggleSubmenu('purchaseSubmenu')" aria-expanded="false" aria-controls="purchaseSubmenu">
                        <div class="nav-button-content">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="nav-text">Purchases</span>
                        </div>
                        <i class="fas fa-angle-down nav-arrow"></i>
                    </button>
                    <ul id="purchaseSubmenu" class="submenu hidden">
                        <li>
                            <a href="{% url 'invoice_list' %}" class="nav-submenu-link" style="text-decoration: none;">
                                <i class="fas fa-file-invoice"></i>
                                <span class="nav-text">Invoices</span>
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'add_invoice_with_products' %}" class="nav-submenu-link" style="text-decoration: none;">
                                <i class="fas fa-plus"></i>
                                <span class="nav-text">New Invoice + Products</span>
                            </a>
                        </li>
                    </ul>
                </li>
                
                <!-- Suppliers -->
                <li>
                    <a href="{% url 'supplier_list' %}" class="nav-link" style="text-decoration: none;">
                        <i class="fas fa-truck"></i>
                        <span class="nav-text">Suppliers</span>
                    </a>
                </li>
                
                <!-- Sales Menu -->
                <li class="nav-item">
                    <button type="button" class="nav-menu-button" onclick="toggleSubmenu('salesSubmenu')" aria-expanded="false" aria-controls="salesSubmenu">
                        <div class="nav-button-content">
                            <i class="fas fa-cash-register"></i>
                            <span class="nav-text">Sales</span>
                        </div>
                        <i class="fas fa-angle-down nav-arrow"></i>
                    </button>
                    <ul id="salesSubmenu" class="submenu hidden">
                        <li>
                            <a href="{% url 'sales_invoice_list' %}" class="nav-submenu-link"style="text-decoration: none;">
                                <i class="fas fa-file-invoice-dollar"></i>
                                <span class="nav-text">Invoices</span>
                            </a>
                        </li>
                        <!-- <li>
                            <a href="{% url 'add_sales_invoice' %}" class="nav-submenu-link" style="text-decoration: none;">
                                <i class="fas fa-plus"></i>
                                <span class="nav-text">New Invoice</span>
                            </a>
                        </li> -->
                        <li>
                            <a href="{% url 'add_sales_invoice_with_products' %}" id="quickInvoiceLink" class="nav-submenu-link"style="text-decoration: none;">
                                <i class="fas fa-bolt"></i>
                                <span class="nav-text">Quick Invoice+Products</span>
                                <span class="shortcut-badge">Ctrl+SI</span>
                            </a>
                        </li>
                    </ul>
                </li>
                
                <!-- Customers -->
                <li>
                    <a href="{% url 'customer_list' %}" class="nav-link" style="text-decoration: none;">
                        <i class="fas fa-users"></i>
                        <span class="nav-text">Customers</span>
                    </a>
                </li>
                
                <!-- Enhanced Inventory Menu -->
                <li class="nav-item" role="none">
                    <button type="button" class="nav-menu-button" onclick="toggleSubmenu('inventorySubmenu')" aria-expanded="false" aria-controls="inventorySubmenu" role="menuitem">
                        <div class="nav-button-content">
                            <i class="fas fa-boxes"></i>
                            <span class="nav-text">Inventory</span>
                        </div>
                        <i class="fas fa-angle-down nav-arrow"></i>
                    </button>
                    <ul id="inventorySubmenu" class="submenu hidden" role="menu">
                        <li role="none">
                            <a href="{% url 'inventory_list' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-list"></i>
                                <span class="nav-text">All Products Inventory</span>
                            </a>
                        </li>
                        <li role="none">
                            <a href="{% url 'low_stock_update' %}" class="nav-submenu-link" role="menuitem" style="text-decoration: none; color: #ff9800;">
                                <i class="fas fa-plus-circle"></i>
                                <span class="nav-text">Update Low Stock</span>
                            </a>
                        </li>
                        <li role="none">
                            <a href="{% url 'batch_inventory_report' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-layer-group"></i>
                                <span class="nav-text">Batch-wise Report</span>
                            </a>
                        </li>
                        <li role="none">
                            <a href="{% url 'dateexpiry_inventory_report' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-calendar-alt"></i>
                                <span class="nav-text">Date-wise Report</span>
                            </a>
                        </li>
                    </ul>
                </li>
                
                <!-- Enhanced Products Menu -->
                <li class="nav-item" role="none">
                    <button type="button" class="nav-menu-button" onclick="toggleSubmenu('productsSubmenu')" aria-expanded="false" aria-controls="productsSubmenu" role="menuitem">
                        <div class="nav-button-content">
                            <i class="fas fa-pills"></i>
                            <span class="nav-text">Products</span>
                        </div>
                        <i class="fas fa-angle-down nav-arrow"></i>
                    </button>
                    <ul id="productsSubmenu" class="submenu hidden" role="menu">
                        <li role="none">
                            <a href="{% url 'product_list' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-list"></i>
                                <span class="nav-text">Product List</span>
                            </a>
                        </li>

                    </ul>
                </li>
                
                <!-- Enhanced Reports Menu -->
                <li class="nav-item" role="none">
                    <button type="button" class="nav-menu-button" onclick="toggleSubmenu('reportsSubmenu')" aria-expanded="false" aria-controls="reportsSubmenu" role="menuitem">
                        <div class="nav-button-content">
                            <i class="fas fa-chart-bar"></i>
                            <span class="nav-text">Reports</span>
                        </div>
                        <i class="fas fa-angle-down nav-arrow"></i>
                    </button>
                    <ul id="reportsSubmenu" class="submenu hidden" role="menu">
                        <li role="none">
                            <a href="{% url 'sales_report' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-chart-line"></i>
                                <span class="nav-text">Sales</span>
                            </a>
                        </li>
                        <li role="none">
                            <a href="{% url 'purchase_report' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-shopping-basket"></i>
                                <span class="nav-text">Purchases</span>
                            </a>
                        </li>
                        {% comment %}
                        <li role="none">
                            <a href="{% url 'financial_report' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-coins"></i>
                                <span class="nav-text">Financial</span>
                            </a>
                        </li>
                        {% endcomment %}
                    </ul>
                </li>
                
                <!-- Enhanced Returns Menu -->
                <li class="nav-item" role="none">
                    <button type="button" class="nav-menu-button" onclick="toggleSubmenu('returnsSubmenu')" aria-expanded="false" aria-controls="returnsSubmenu" role="menuitem">
                        <div class="nav-button-content">
                            <i class="fas fa-undo"></i>
                            <span class="nav-text">Returns</span>
                        </div>
                        <i class="fas fa-angle-down nav-arrow"></i>
                    </button>
                    <ul id="returnsSubmenu" class="submenu hidden" role="menu">
                        <li role="none">
                            <a href="{% url 'purchase_return_list' %}" class="nav-submenu-link" role="menuitem">
                                <i class="fas fa-truck-loading"></i>
                                <span class="nav-text">Purchase Returns</span>
                            </a>
                        </li>
                        <li role="none">
                            <a href="{% url 'sales_return_list' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-undo-alt"></i>
                                <span class="nav-text">Sales Returns</span>
                            </a>
                        </li>
                    </ul>
                </li>
                
                <!-- Enhanced Dashboard -->
                <li role="none">
                    <a href="{% url 'dashboard' %}" class="nav-link" role="menuitem"style="text-decoration: none;">
                        <i class="fas fa-tachometer-alt"></i>
                        <span class="nav-text">Dashboard</span>
                    </a>
                </li>
                
                <!-- Enhanced Finance Menu -->
                {% comment %} <li class="nav-item" role="none">
                    <button type="button" class="nav-menu-button" onclick="toggleSubmenu('financeSubmenu')" aria-expanded="false" aria-controls="financeSubmenu" role="menuitem">
                        <div class="nav-button-content">
                            <i class="fas fa-money-bill-wave"></i>
                            <span class="nav-text">Finance</span>
                        </div>
                        <i class="fas fa-angle-down nav-arrow"></i>
                    </button>
                    <ul id="financeSubmenu" class="submenu hidden" role="menu">
                        <li role="none">
                            <a href="{% url 'payment_list' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-chart-line"></i>
                                <span class="nav-text">Financial payment</span>
                            </a>
                        </li>
                        <li role="none">
                            <a href="{% url 'receipt_list' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-receipt"></i>
                                <span class="nav-text">Sales Receipt</span>
                            </a>
                        </li>
                    </ul>
                </li>
                 {% endcomment %}
                <!-- Enhanced Admin Menu (Conditional) -->
                {% if user.user_type == 'admin' %}
                <li class="nav-item" role="none">
                    <button type="button" class="nav-menu-button" onclick="toggleSubmenu('adminSubmenu')" aria-expanded="false" aria-controls="adminSubmenu" role="menuitem">
                        <div class="nav-button-content">
                            <i class="fas fa-cog"></i>
                            <span class="nav-text">Admin</span>
                        </div>
                        <i class="fas fa-angle-down nav-arrow"></i>
                    </button>
                    <ul id="adminSubmenu" class="submenu hidden" role="menu">
                        <li role="none">
                            <a href="{% url 'register' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-user-plus"></i>
                                <span class="nav-text">Add User</span>
                            </a>
                        </li>
                        <li role="none">
                            <a href="{% url 'pharmacy_details' %}" class="nav-submenu-link" role="menuitem"style="text-decoration: none;">
                                <i class="fas fa-clinic-medical"></i>
                                <span class="nav-text">Pharmacy Details</span>
                            </a>
                        </li>
                    </ul>
                </li>
                {% endif %}
            </ul>
        </nav>
        
        <!-- Footer with logout and settings -->
        <div class="sidebar-footer">
            <div class="footer-content">
                <a href="{% url 'logout' %}" class="footer-link logout-link" title="Logout"style="text-decoration: none;">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="nav-text">Logout</span>
                </a>
                <button class="footer-button settings-button" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>
    </div>
</aside>



