{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/product_form2.css' %}">
{% endblock %}

{% block content %}
<div class="product-form-container">
    <div class="product-form-wrapper">
        <div class="product-form-card">
            <div class="product-form-header">
                <div class="product-form-title-section">
                    <h5 class="product-form-title">{% if product %}Update{% else %}Add{% endif %} Product</h5>
                </div>
            </div>
            <div class="product-form-body">
                <form method="post" enctype="multipart/form-data" class="product-form">
                    {% csrf_token %}
                    
                    <div class="product-form-col">
                        <label for="{{ form.product_name.id_for_label }}">Product Name*</label>
                        {{ form.product_name }}
                        {% if form.product_name.errors %}
                            <div class="product-name-errors">{{ form.product_name.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.product_company.id_for_label }}">Company*</label>
                        {{ form.product_company }}
                        {% if form.product_company.errors %}
                            <div class="product-company-errors">{{ form.product_company.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.product_packing.id_for_label }}">Packing*</label>
                        {{ form.product_packing }}
                        {% if form.product_packing.errors %}
                            <div class="product-packing-errors">{{ form.product_packing.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.product_salt.id_for_label }}">Salt Composition*</label>
                        {{ form.product_salt }}
                        {% if form.product_salt.errors %}
                            <div class="product-salt-errors">{{ form.product_salt.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.product_category.id_for_label }}">Category*</label>
                        {{ form.product_category }}
                        {% if form.product_category.errors %}
                            <div class="product-category-errors">{{ form.product_category.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.product_hsn.id_for_label }}">HSN Code*</label>
                        {{ form.product_hsn }}
                        {% if form.product_hsn.errors %}
                            <div class="product-hsn-errors">{{ form.product_hsn.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.product_hsn_percent.id_for_label }}">HSN Tax %*</label>
                        {{ form.product_hsn_percent }}
                        {% if form.product_hsn_percent.errors %}
                            <div class="product-hsn-percent-errors">{{ form.product_hsn_percent.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.product_barcode.id_for_label }}">
                            <i class="fas fa-barcode"></i> Product Barcode
                        </label>
                        <div class="product-barcode-input-group">
                            {{ form.product_barcode }}
                            <button type="button" id="generateBarcodeBtn" class="product-barcode-generate-btn">
                                Generate
                            </button>
                        </div>
                        <small class="product-barcode-help-text">Optional - Scan or generate barcode</small>
                        {% if form.product_barcode.errors %}
                            <div class="product-barcode-errors">{{ form.product_barcode.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.product_image.id_for_label }}">Product Image</label>
                        {{ form.product_image }}
                        {% if form.product_image.errors %}
                            <div class="product-image-errors">{{ form.product_image.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.rate_A.id_for_label }}">Rate A*</label>
                        {{ form.rate_A }}
                        {% if form.rate_A.errors %}
                            <div class="product-rate-a-errors">{{ form.rate_A.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.rate_B.id_for_label }}">Rate B*</label>
                        {{ form.rate_B }}
                        {% if form.rate_B.errors %}
                            <div class="product-rate-b-errors">{{ form.rate_B.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-col">
                        <label for="{{ form.rate_C.id_for_label }}">Rate C*</label>
                        {{ form.rate_C }}
                        {% if form.rate_C.errors %}
                            <div class="product-rate-c-errors">{{ form.rate_C.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="product-form-actions">
                        <button type="submit" class="product-form-submit-btn">
                            <i class="fas fa-save"></i> {% if product %}Update{% else %}Save{% endif %} Product
                        </button>
                        <a href="{% url 'product_list' %}" class="product-form-cancel-btn">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Focus on first input field
    const firstInput = document.querySelector('input[name="product_name"]');
    if (firstInput) {
        firstInput.focus();
    }
});
</script>
{% endblock %}